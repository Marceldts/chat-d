<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-row>
      <ion-title class="ion-text-center">Chat</ion-title>
      <ion-button class="logout" (click)="onLogoff()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-content" [scrollEvents]="true" onload="scrollOnInit()">
  <ion-list>
    <!-- Antes, el slice estaba de 0 a slice, pero lo puse de slice a messages.length para que no me carguen todos los mensajes
        Vuelvo a ponerlo como antes porque si no hay suficientes mensajes no los carga
    -->
    <div class="flex">
      <div *ngFor="let message of messages | slice: 0:messages.length" [ngClass]="message.user === user ? 'own' : 'other'">
        <ion-row >
          <ion-text><b>{{ message.user }}: &nbsp;</b></ion-text>
          <ion-text> {{ message.text }}</ion-text>
        </ion-row>
        </div> 
    </div>
  </ion-list>

  <!-- <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Cargando mÃ¡s mensajes..."
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll> -->
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-row>
      <ion-input
        type="text"
        placeholder="Escribe aquÃ­"
        minlength="1"
        id="inputMessage"
        (keyup.enter)="onSendMessage()"
      ></ion-input>
      <ion-button (click)="onSendMessage()" class="enviar">
        <ion-icon slot="icon-only" name="add"></ion-icon>
      </ion-button>
    </ion-row>
  </ion-toolbar>
</ion-footer>
