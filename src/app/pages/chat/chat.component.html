<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-row>
      <ion-title class="ion-text-center">Chat</ion-title>
      <ion-button class="logout" (click)="onLogoff()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-content" [scrollEvents]="true">
  <ion-list>
    <!-- Antes, el slice estaba de 0 a slice, pero lo puse de slice a messages.length para que no me carguen todos los mensajes
        Vuelvo a ponerlo como antes porque si no hay suficientes mensajes no los carga
    -->
    <ion-item *ngFor="let mesage of messages | slice: ind:messages.length" class="msg">
      <ion-row>
        <ion-text color="tertiary"><b>{{ mesage.user }}: &nbsp;</b></ion-text>
        <ion-text color="secondary"> {{ mesage.text }}</ion-text>
      </ion-row>
    </ion-item>
  </ion-list>

  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Cargando más mensajes..."
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-row>
      <ion-input
        type="text"
        placeholder="Escribe aquí"
        minlength="1"
        id="inputMessage"
        (keyup.enter)="onSendMessage()"
      ></ion-input>
      <ion-button (click)="onSendMessage()" class="enviar">
        <ion-icon slot="icon-only" name="add"></ion-icon>
      </ion-button>
    </ion-row>
  </ion-toolbar>
</ion-footer>
